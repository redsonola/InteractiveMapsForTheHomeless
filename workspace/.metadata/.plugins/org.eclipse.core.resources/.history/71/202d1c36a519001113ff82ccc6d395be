//TODO: Add Volume control... would be nice, riiight? we'll see. 

package com.somethingfurry.maps_and_then_some;

import processing.core.PApplet;
import de.fhpotsdam.unfolding.Map;
import de.fhpotsdam.unfolding.geo.Location;
import ddf.minim.*;

public class AudioLocationMapMarker extends MediaMarker {
	
	private String _filename; 
	private Minim _minim; 
	AudioPlayer _player;
	boolean _playing = false;
	protected static final int BORDER_SIZE = 25; 
	

	AudioLocationMapMarker(Location location, PApplet display, Map map, String locationName, Minim minim, String filename)
	{
		super(location, display, map, AUDIO_ICON, locationName);
		_minim = minim; 	
		_filename = filename; 
		_player = _minim.loadFile(_filename, 2048);

	}
	
	//event class for when closing media
	public void onStartMedia()
	{
		_player.play();
	}		
	
	//show mediaType
	public void presentMedia()
	{
		//draw something here to show audio is playing for shiz and giggles... TODO
		//would be nice... maybe have a playing image.
		
		int[] xy = new int[2];
		xy = center(_width+BORDER_SIZE, _height+BORDER_SIZE);
		
		_display.fill(0, 0, 0, 255);
		_display.rect(xy[0], xy[1], box_len(), BORDER_SIZE);
		_display.fill(255, 255, 255, 255);
		_display.text(_locationName, xy[0]+25, xy[1]+21);
		return xy; 		
	}
	
	private int box_len()
	{
		int count = _locationName.length(); 
		return count * _fontSize: 	
	}
	
	
	//stop audio
	public void onCloseMedia()
	{
		_player.close();
	}

}
