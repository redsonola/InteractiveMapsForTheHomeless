
package com.somethingfurry.maps_and_then_some;

import de.fhpotsdam.unfolding.geo.Location;
import de.fhpotsdam.unfolding.providers.Google;
import de.fhpotsdam.unfolding.utils.MapUtils;
import processing.core.PApplet;

public class MyInteractiveMap extends PApplet {
	float x;       // horizontal location of stripe
	float speed;   // speed of stripe
	float w;       // width of stripe
	boolean mouse; // state of stripe (mouse is over or not?)
	PApplet parent; // The parent PApplet that we will render ourselves onto
	de.fhpotsdam.unfolding.Map map;
	
	
	MyInteractiveMap(PApplet p) {
		parent = p;
		x = 0;              // All stripes start at 0
		speed = parent.random(1);  // All stripes have a random positive speed
		w = parent.random(10,30);
		mouse = false;
		

		map = new de.fhpotsdam.unfolding.Map(this, "map", 10, 10, 800, 600, true, false, new Google.GoogleMapProvider());
		MapUtils.createDefaultEventDispatcher(this, map);
		map.setTweening(false);		
	}

	// Draw stripe
	void display() {
		  map.draw();

		  parent.noStroke();
		  parent.fill(215, 0, 0, 100);

		  // Shows geo-location at mouse position
		  Location location = map.getLocationFromScreenPosition(mouseX, mouseY);
		  parent.text(location.toString(), mouseX, mouseY);

		  // Shows marker at Berlin location
		  Location loc = new Location(52.5f, 13.4f);
		  float xy[] = map.getScreenPositionFromLocation(loc);
		  parent.ellipse(xy[0], xy[1], 20, 20);
	}
	

	// Move stripe
	void move() {
		x += speed;
		if (x > parent.width+20) x = -20;
	}	
	
}


